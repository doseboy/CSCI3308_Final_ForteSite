<% include ../partials/header %>

<div class="col-md-2 m-auto" style="opacity:0; position:absolute; left:9999px;">
        <div class="card card-body">
                <ul id="ScheduleInfo" style="height: 0px;" class="list-group pre-scrollable">
                        <%
                    if (schedules) {
                        var rows = '';
                        schedules.forEach((item) => {
                            rows += ' <p id="teachid">' + item.teachersid;
                            rows += ' <p id="di">' + item.days;
                            rows += ' <p id="mi">' + item.monday;
                            rows += ' <p id="ti">' + item.tuesday;
                            rows += ' <p id="wi">' + item.wednesday;
                            rows += ' <p id="thi">' + item.thursday;
                            rows += ' <p id=fi>' + item.friday;
                            rows += ' <p id=si>' + item.saturday;
                            rows += ' <p id=ui>' + item.sunday;
                        }); %>
                        <%- rows %>
                        <% } %>
                    </ul>
        </div>
    </div>

    

    <div class="col-md-3 m-auto">
            <div class="card card-body mainCard">
                <h3><img class="img-fluid center testTrans" src="/images/forteShortLogo.png" alt="LogoPic"></h3>
                <h3 id="greeting" class="p" style="text-align:center">Book your Meeting</h3>
            </div>
            </div>
            <br>
    
    
    <div class="row"> 
    
            <div class="col"  align="left">
                </div>
     
    
            <button type="button" style="text-align:center" onclick="weekchange(1)" >&laquo; Previous Week</button> 
    
            <div class="col"  align="center">
                <div class="card border-dark" style="width:90%;">
                        <p id="weekdates" name="weekdates" class="h4" style="text-align:center">Week Dates</p>
                </div>
            </div>
    
            <button type="button" style="text-align:center" onclick="weekchange(-1)" >&nbsp; &nbsp; Next Week &raquo &nbsp;</button> 
    
            <div class="col"  align="right">
                </div>
            
    </div>
    
    <br>
    
    <form action="/bookmeeting<%=teachid%>" method="POST">
    <div class="row" id="Schedule_Display"> 
        <div style="padding-left:10px"></div>

        <div class="col">
            <div class="card border-dark" style="height:100%;">
        
                <div class="my-auto card-body">
                        <p id="date_1" name="date_1" class="h4" style="text-align:center"></p>
                        <img id="image_1" class="img-fluid" src="/images/Rest.png" alt="Today's Weather Icon">
                        <p id="icon_1" class="h4" style="text-align:center">Monday</p>
                        <p id="high_1" class="p" style="text-align:center">Rest Day</p>
                </div>
                <div id="mondayCard" style="width:125%">
                    <div class="my-auto">
                        <div class = "card-body row">
                    
                            <div class ="col" >
                            <div class ="row">7am &nbsp; &nbsp; <input type="radio"   name="hour" id="m1" value=0 onclick=toggle(id)></div>
                            <div class ="row">8am &nbsp; &nbsp; <input type="radio"   name="hour" id="m2" value=0 onclick=toggle(id)></div>
                            <div class ="row">9am &nbsp; &nbsp; <input type="radio"   name="hour" id="m3" value=0 onclick=toggle(id)></div>       
                            <div class ="row">10am &nbsp; <input type="radio"   name="hour" id="m4" value=0 onclick=toggle(id)></div>        
                            <div class ="row">11am &nbsp; <input type="radio"  name="hour" id="m5" value=0 onclick=toggle(id)></div> 
                            <div class ="row">12pm &nbsp; <input type="radio"   name="hour" id="m6" value=0 onclick=toggle(id)></div>  
                            </div> 
                            
                            <div class ="col-md-1"></div>
    
                            <div class ="col">         
                            <div class ="row">1pm &nbsp; <input type="radio"   name="hour" id="m7" value=0 onclick=toggle(id)></div>          
                            <div class ="row">2pm &nbsp; <input type="radio"   name="hour" id="m8" value=0 onclick=toggle(id)></div>        
                            <div class ="row">3pm &nbsp; <input type="radio"   name="hour" id="m9" value=0 onclick=toggle(id)></div>      
                            <div class ="row">4pm &nbsp; <input type="radio"   name="hour" id="m10" value=0 onclick=toggle(id)></div>        
                            <div class ="row">5pm &nbsp; <input type="radio"   name="hour" id="m11" value=0 onclick=toggle(id)></div>          
                            <div class ="row">6pm &nbsp; <input type="radio"   name="hour" id="m12" value=0 onclick=toggle(id)></div> 
                            </div> 
    
                            <div class ="col-sm-1"></div>      
                                          
                    </div>
                </div>
                </div>
            </div>
        </div>
    
    
        <div class="col">
            <div class="card border-dark" style="height:100%;">
                <div class="my-auto card-body">
                    <p id="date_2" name="date_2" class="h4" style="text-align:center"></p>
                    <img id="image_2" class="img-fluid" src="/images/Rest.png" alt="Today's Weather Icon">
                    <p id="icon_2" class="h4" style="text-align:center">Tuesday</p>
                    <p id="high_2" class="p" style="text-align:center">Rest Day</p>
                </div>
                <div id="tuesdayCard" style="width:125%">
                    <div class="my-auto">
                        <div class = "card-body row">
                    
                            <div class ="col" >
                            <div class ="row">7am &nbsp; &nbsp; <input type="radio"   name="hour" id="t1" value=0 onclick=toggle(id)></div>
                            <div class ="row">8am &nbsp; &nbsp; <input type="radio"   name="hour" id="t2" value=0 onclick=toggle(id)></div>
                            <div class ="row">9am &nbsp; &nbsp; <input type="radio"   name="hour" id="t3" value=0 onclick=toggle(id)></div>       
                            <div class ="row">10am &nbsp; <input type="radio"   name="hour" id="t4" value=0 onclick=toggle(id)></div>        
                            <div class ="row">11am &nbsp; <input type="radio"  name="hour" id="t5" value=0 onclick=toggle(id)></div> 
                            <div class ="row">12pm &nbsp; <input type="radio"   name="hour" id="t6" value=0 onclick=toggle(id)></div>  
                            </div> 
                            
                            <div class ="col-md-1"></div>
    
                            <div class ="col">         
                            <div class ="row">1pm &nbsp; <input type="radio"   name="hour" id="t7" value=0 onclick=toggle(id)></div>          
                            <div class ="row">2pm &nbsp; <input type="radio"   name="hour" id="t8" value=0 onclick=toggle(id)></div>        
                            <div class ="row">3pm &nbsp; <input type="radio"   name="hour" id="t9" value=0 onclick=toggle(id)></div>      
                            <div class ="row">4pm &nbsp; <input type="radio"   name="hour" id="t10" value=0 onclick=toggle(id)></div>        
                            <div class ="row">5pm &nbsp; <input type="radio"   name="hour" id="t11" value=0 onclick=toggle(id)></div>          
                            <div class ="row">6pm &nbsp; <input type="radio"   name="hour" id="t12" value=0 onclick=toggle(id)></div> 
                            </div> 
    
                            <div class ="col-sm-1"></div>      
                </div>
                    </div>
                </div>
            </div>
        </div>
        
    
        <div class="col">
                <div class="card border-dark" style="height:100%;">
                    <div class="my-auto card-body">
                        <p id="date_3" name="date_3" class="h4" style="text-align:center"></p>
                        <img id="image_3" class="img-fluid" src="/images/Rest.png" alt="Today's Weather Icon">
                        <p id="icon_3" class="h4" style="text-align:center">Wednesday</p>
                        <p id="high_3" class="p" style="text-align:center">Rest Day</p>
                    </div>
                    <div id="wednesdayCard" style="width:125%">
                        <div class="my-auto">
                            <div class = "card-body row">
                            
                                <div class ="col" >
                                <div class ="row">7am &nbsp; &nbsp; <input type="radio"   name="hour" id="w1" value=0 onclick=toggle(id)></div>
                                <div class ="row">8am &nbsp; &nbsp; <input type="radio"   name="hour" id="w2" value=0 onclick=toggle(id)></div>
                                <div class ="row">9am &nbsp; &nbsp; <input type="radio"   name="hour" id="w3" value=0 onclick=toggle(id)></div>       
                                <div class ="row">10am &nbsp; <input type="radio"   name="hour" id="w4" value=0 onclick=toggle(id)></div>        
                                <div class ="row">11am &nbsp; <input type="radio"  name="hour" id="w5" value=0 onclick=toggle(id)></div> 
                                <div class ="row">12pm &nbsp; <input type="radio"   name="hour" id="w6" value=0 onclick=toggle(id)></div>  
                                </div> 
                                
                                <div class ="col-md-1"></div>
        
                                <div class ="col">         
                                <div class ="row">1pm &nbsp; <input type="radio"   name="hour" id="w7" value=0 onclick=toggle(id)></div>          
                                <div class ="row">2pm &nbsp; <input type="radio"   name="hour" id="w8" value=0 onclick=toggle(id)></div>        
                                <div class ="row">3pm &nbsp; <input type="radio"   name="hour" id="w9" value=0 onclick=toggle(id)></div>      
                                <div class ="row">4pm &nbsp; <input type="radio"   name="hour" id="w10" value=0 onclick=toggle(id)></div>        
                                <div class ="row">5pm &nbsp; <input type="radio"   name="hour" id="w11" value=0 onclick=toggle(id)></div>          
                                <div class ="row">6pm &nbsp; <input type="radio"   name="hour" id="w12" value=0 onclick=toggle(id)></div> 
                                </div> 
        
                                <div class ="col-sm-1"></div>      
                            </div>
                    </div>
                </div>
            </div>
        </div>
            
            <div class="col">
                <div class="card border-dark" style="height:100%;">
                    <div class="my-auto card-body">
                        <p id="date_4" name="date_4" class="h4" style="text-align:center"></p>
                        <img id="image_4" class="img-fluid" src="/images/Rest.png" alt="Today's Weather Icon">
                        <p id="icon_4" class="h4" style="text-align:center">Thursday</p>
                        <p id="high_4" class="p" style="text-align:center">Rest Day</p>
                    </div>
                    <div id="thursdayCard" style="width:125%">
                        <div class="my-auto">
                            <div class = "card-body row">
                            
                                <div class ="col" >
                                <div class ="row">7am &nbsp; &nbsp; <input type="radio"   name="hour" id="th1" value=0 onclick=toggle(id)></div>
                                <div class ="row">8am &nbsp; &nbsp; <input type="radio"   name="hour" id="th2" value=0 onclick=toggle(id)></div>
                                <div class ="row">9am &nbsp; &nbsp; <input type="radio"   name="hour" id="th3" value=0 onclick=toggle(id)></div>       
                                <div class ="row">10am &nbsp; <input type="radio"   name="hour" id="th4" value=0 onclick=toggle(id)></div>        
                                <div class ="row">11am &nbsp; <input type="radio"  name="hour" id="th5" value=0 onclick=toggle(id)></div> 
                                <div class ="row">12pm &nbsp; <input type="radio"   name="hour" id="th6" value=0 onclick=toggle(id)></div>  
                                </div> 
                                
                                <div class ="col-md-1"></div>
        
                                <div class ="col">         
                                <div class ="row">1pm &nbsp; <input type="radio"   name="hour" id="th7" value=0 onclick=toggle(id)></div>          
                                <div class ="row">2pm &nbsp; <input type="radio"   name="hour" id="th8" value=0 onclick=toggle(id)></div>        
                                <div class ="row">3pm &nbsp; <input type="radio"   name="hour" id="th9" value=0 onclick=toggle(id)></div>      
                                <div class ="row">4pm &nbsp; <input type="radio"   name="hour" id="th10" value=0 onclick=toggle(id)></div>        
                                <div class ="row">5pm &nbsp; <input type="radio"   name="hour" id="th11" value=0 onclick=toggle(id)></div>          
                                <div class ="row">6pm &nbsp; <input type="radio"   name="hour" id="th12" value=0 onclick=toggle(id)></div> 
                                </div> 
        
                                <div class ="col-sm-1"></div>      
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    
            <div class="col">
                    <div class="card border-dark" style="height:100%;">
                        <div class="my-auto card-body">
                            <p id="date_5" name="date_5" class="h4" style="text-align:center"></p>
                            <img id="image_5" class="img-fluid" src="/images/Rest.png" alt="Today's Weather Icon">
                            <p id="icon_5" class="h4" style="text-align:center">Friday</p>
                            <p id="high_5" class="p" style="text-align:center">Rest Day</p>
                        </div>
                        <div id="fridayCard" style="width:125%">
                                <div class="my-auto">
                                    <div class = "card-body row">
                                    
                                        <div class ="col" >
                                        <div class ="row">7am &nbsp; &nbsp; <input type="radio"   name="hour" id="f1" value=0 onclick=toggle(id)></div>
                                        <div class ="row">8am &nbsp; &nbsp; <input type="radio"   name="hour" id="f2" value=0 onclick=toggle(id)></div>
                                        <div class ="row">9am &nbsp; &nbsp; <input type="radio"   name="hour" id="f3" value=0 onclick=toggle(id)></div>       
                                        <div class ="row">10am &nbsp; <input type="radio"   name="hour" id="f4" value=0 onclick=toggle(id)></div>        
                                        <div class ="row">11am &nbsp; <input type="radio"  name="hour" id="f5" value=0 onclick=toggle(id)></div> 
                                        <div class ="row">12pm &nbsp; <input type="radio"   name="hour" id="f6" value=0 onclick=toggle(id)></div>  
                                        </div> 
                                        
                                        <div class ="col-md-1"></div>
                
                                        <div class ="col">         
                                        <div class ="row">1pm &nbsp; <input type="radio"   name="hour" id="f7" value=0 onclick=toggle(id)></div>          
                                        <div class ="row">2pm &nbsp; <input type="radio"   name="hour" id="f8" value=0 onclick=toggle(id)></div>        
                                        <div class ="row">3pm &nbsp; <input type="radio"   name="hour" id="f9" value=0 onclick=toggle(id)></div>      
                                        <div class ="row">4pm &nbsp; <input type="radio"   name="hour" id="f10" value=0 onclick=toggle(id)></div>        
                                        <div class ="row">5pm &nbsp; <input type="radio"   name="hour" id="f11" value=0 onclick=toggle(id)></div>          
                                        <div class ="row">6pm &nbsp; <input type="radio"   name="hour" id="f12" value=0 onclick=toggle(id)></div> 
                                        </div> 
                
                                        <div class ="col-sm-1"></div>      
                                    </div>
                                </div>
                            </div>
                </div>
            </div>
    
            <div class="col">
                    <div class="card border-dark" style="height:100%;">
                        <div class="my-auto card-body">
                            <p id="date_6" name="date_6" class="h4" style="text-align:center"></p>
                            <img id="image_6" class="img-fluid" src="/images/Rest.png" alt="Today's Weather Icon">
                            <p id="icon_6" class="h4" style="text-align:center">Saturday</p>
                            <p id="high_6" class="p" style="text-align:center">Rest Day</p>
                        </div>
                            <div id="saturdayCard" style="width:125%">
                                    <div class="my-auto">
                                        <div class = "card-body row">
                                        
                                            <div class ="col" >
                                            <div class ="row">7am &nbsp; &nbsp; <input type="radio"   name="hour" id="s1" value=0 onclick=toggle(id)></div>
                                            <div class ="row">8am &nbsp; &nbsp; <input type="radio"   name="hour" id="s2" value=0 onclick=toggle(id)></div>
                                            <div class ="row">9am &nbsp; &nbsp; <input type="radio"   name="hour" id="s3" value=0 onclick=toggle(id)></div>       
                                            <div class ="row">10am &nbsp; <input type="radio"   name="hour" id="s4" value=0 onclick=toggle(id)></div>        
                                            <div class ="row">11am &nbsp; <input type="radio"  name="hour" id="s5" value=0 onclick=toggle(id)></div> 
                                            <div class ="row">12pm &nbsp; <input type="radio"   name="hour" id="s6" value=0 onclick=toggle(id)></div>  
                                            </div> 
                                            
                                            <div class ="col-md-1"></div>
                    
                                            <div class ="col">         
                                            <div class ="row">1pm &nbsp; <input type="radio"   name="hour" id="s7" value=0 onclick=toggle(id)></div>          
                                            <div class ="row">2pm &nbsp; <input type="radio"   name="hour" id="s8" value=0 onclick=toggle(id)></div>        
                                            <div class ="row">3pm &nbsp; <input type="radio"   name="hour" id="s9" value=0 onclick=toggle(id)></div>      
                                            <div class ="row">4pm &nbsp; <input type="radio"   name="hour" id="s10" value=0 onclick=toggle(id)></div>        
                                            <div class ="row">5pm &nbsp; <input type="radio"   name="hour" id="s11" value=0 onclick=toggle(id)></div>          
                                            <div class ="row">6pm &nbsp; <input type="radio"   name="hour" id="s12" value=0 onclick=toggle(id)></div> 
                                            </div> 
                    
                                            <div class ="col-sm-1"></div>      
                                        </div>
                        </div>
                    </div>
                </div>
            </div>
    
            <div class="col">
                    <div class="card border-dark" style="height:100%;">
                        <div class="my-auto card-body">
                            <p id="date_7" name="date_7" class="h4" style="text-align:center"></p>
                            <img id="image_7" class="img-fluid" src="/images/Rest.png" alt="Today's Weather Icon">
                            <p id="icon_7" class="h4" style="text-align:center">Sunday</p>
                            <p id="high_7" class="p" style="text-align:center">Rest Day</p>
                        </div>
                        </ul>
                            <div id="sundayCard" style="width:125%">
                                    <div class="my-auto">
                                        <div class = "card-body row">
                                                                        
                                            <div class ="col" >
                                            <div class ="row">7am &nbsp; &nbsp; <input type="radio"   name="hour" id="u1" value=0 onclick=toggle(id)></div>
                                            <div class ="row">8am &nbsp; &nbsp; <input type="radio"   name="hour" id="u2" value=0 onclick=toggle(id)></div>
                                            <div class ="row">9am &nbsp; &nbsp; <input type="radio"   name="hour" id="u3" value=0 onclick=toggle(id)></div>       
                                            <div class ="row">10am &nbsp; <input type="radio"   name="hour" id="u4" value=0 onclick=toggle(id)></div>        
                                            <div class ="row">11am &nbsp; <input type="radio"  name="hour" id="u5" value=0 onclick=toggle(id)></div> 
                                            <div class ="row">12pm &nbsp; <input type="radio"   name="hour" id="u6" value=0 onclick=toggle(id)></div>  
                                            </div> 
                                            
                                            <div class ="col-md-1"></div>
                    
                                            <div class ="col">         
                                            <div class ="row">1pm &nbsp; <input type="radio"   name="hour" id="u7" value=0 onclick=toggle(id)></div>          
                                            <div class ="row">2pm &nbsp; <input type="radio"   name="hour" id="u8" value=0 onclick=toggle(id)></div>        
                                            <div class ="row">3pm &nbsp; <input type="radio"   name="hour" id="u9" value=0 onclick=toggle(id)></div>      
                                            <div class ="row">4pm &nbsp; <input type="radio"   name="hour" id="u10" value=0 onclick=toggle(id)></div>        
                                            <div class ="row">5pm &nbsp; <input type="radio"   name="hour" id="u11" value=0 onclick=toggle(id)></div>          
                                            <div class ="row">6pm &nbsp; <input type="radio"   name="hour" id="u12" value=0 onclick=toggle(id)></div> 
                                            </div> 
                    
                                            <div class ="col-sm-1"></div>      
                                        </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div style="padding-left:10px"></div>
     
                </div>
    
    <br><br>
    
    <input type="checkbox" id="meetinghour" name="meetinghour" value='' checked="checked" style="opacity:0; position:absolute; left:9999px;">
    <input type="checkbox" id="meetingmonth" name="meetingmonth" value='' checked="checked" style="opacity:0; position:absolute; left:9999px;">
    <input type="checkbox" id="meetingdate" name="meetingdate" value='' checked="checked" style="opacity:0; position:absolute; left:9999px;">
    
    
    <p id="meeting_selected" class="h3" style="text-align:center"></p>
    
    
    
    <div class="row"> 
    
        <div class="col"  align="left">
            </div>
    
        <div class="col"  align="center">
            <input type="submit" value="Create Booking" id="createB" style="width:100%" class="btn btn-info btn-block" style="text-align:center">
            </form>
            <br>
            <a class="btn btn-primary btn-block" style="width:100%" href="/student-dashboard" style="text-align:center">Back To Dashboard</a>
        </div>
    
        <div class="col"  align="right">
            </div>
        
    </div>
    
    
    <br><br>
    
    <script>
    
    var weekcounter=0
    
    
    //helper function to count num of digits
    function getlength(number) {
        return number.toString().length;
    }
    //helper function to change date
    function changedate(date, days) {
      var result = new Date(date);
      result.setDate(result.getDate() + days);
      return result;
    }
    
    //Toggle is changed a lot from teacher scheduling
    //Instead of toggling one of many values, it sets all the required values to make the meeting when a time is selected
    
    
    
    
    function toggle(id){
        var week= ['m','t','w','th','f','s','u']
        var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
        var num_months = ["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12"]
        var dti=['date_1','date_2','date_3','date_4','date_5','date_6','date_7']
        
        document.getElementById("createB").disabled = false;
    
        //special case for th because substrings are set back by 1 (all other days are set to one letter) 
        //Given a lot of time you could make every th an h to get around this, but for now this gets around any issue it could cause    
        if (id.substring(0, 2)=='th'){
            document.getElementById('meetinghour').value= (parseInt(id.substring(2, 4),10)+6).toString()
            document.getElementById('meetingdate').value=document.getElementById(dti[3]).innerHTML
            for (i = 0; i < 12; i++) {
                if (document.getElementById(dti[3]).innerHTML.substring(0, 3)==months[i].substring(0, 3)){
                    document.getElementById('meetingmonth').value=num_months[i]
                }
            }
        }
        //Rest of the days
        else{
        for (i = 0; i < 7; i++) {
            if (id.substring(0, 1)==week[i]){
                document.getElementById('meetinghour').value= (parseInt(id.substring(1, 3),10)+6).toString()
                document.getElementById('meetingdate').value=document.getElementById(dti[i]).innerHTML
                for (j = 0; j < 12; j++) {
                    if (document.getElementById(dti[i]).innerHTML.substring(0, 3)==months[j].substring(0, 3)){
                        document.getElementById('meetingmonth').value=num_months[j]
                    }
                }
            }
        }
    }
    //Logs meeting you've chosen 
    console.log("Meeting Hour:")
    console.log(document.getElementById('meetinghour').value)
    console.log("Meeting Date:")
    console.log(document.getElementById('meetingdate').value)
    console.log("Meeting Month:")
    console.log(document.getElementById('meetingmonth').value)
    }
    
    //Turns schedule true/false inputs into 1s and 0s
    function getBool(string){
        var bools = [];
        if (string[0]=='t') {
            bools.push(1);
              } 
        else{
            bools.push(0)
        }
        for (i = 0; i < string.length; i++) { 
            if (string[i]==',') {
                if (string[i+1]=='t') {
                    bools.push(1);
                }else{
                    bools.push(0)
                } 
              } 
        } 
        return bools;
    }
    
    //Booking version of fillSchedule also fills in the current dates
    function fillSchedule_Booking(){
    var days=getBool(di.innerHTML);
    var week= ['m','t','w','th','f','s','u']
    var dti=['date_1','date_2','date_3','date_4','date_5','date_6','date_7']
    var is=['image_1','image_2','image_3','image_4','image_5','image_6','image_7']
    var hs=['high_1','high_2','high_3','high_4','high_5','high_6','high_7']
    var ls=['low_1','low_2','low_3','low_4','low_5','low_6','low_7']
    var hrs=['7am','8am','9am','10am','11am','12pm','1pm','2pm','3pm','4pm','5pm','6pm']
    var dayhrs=[getBool(mi.innerHTML),getBool(ti.innerHTML),getBool(wi.innerHTML),getBool(thi.innerHTML),getBool(fi.innerHTML),getBool(si.innerHTML),getBool(ui.innerHTML)]
    var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
    
    console.log('Setting Dates...')   
    document.getElementById("createB").disabled = true;
    //A few date variables for filling out the dates
    var d = new Date();
    var tempd=new Date();
    var tempd2=new Date();
    var weekl=new Date();
    var weekh=new Date();
    var daynum=d.getDay();
    //console.log('getdayis')
    //console.log(d.getDay())
    
    //JS uses the week [sunday, monday,....] while we use [monday, tuesday,...] so need to adjust the getDay value to fit our model
    if (daynum==0){
    //console.log('caught sunday')
    daynum=6;}
    else{
    daynum=daynum-1}
    
    console.log('daynum')
    console.log(daynum)
    //console.log('tempd')
    //console.log(tempd)
    //console.log(changedate(tempd, 6),)
    //console.log(changedate(tempd, daynum),)
    //console.log(changedate(tempd, i-daynum),)
    
    
    weekl=changedate(tempd, -daynum)
    weekh=changedate(tempd, 6-daynum)
    document.getElementById('weekdates').innerHTML= months[weekl.getMonth()] + ' '+weekl.getDate()+', '+weekl.getFullYear() + ' - ' +months[weekh.getMonth()] + ' '+weekh.getDate()+', '+weekh.getFullYear();
    
    for (i = 0; i < 7; i++) { 
    console.log(tempd)
    tempd2=changedate(tempd, i-daynum)
    console.log(tempd2)
    //I realised that in over to make the dates consistent to be able to predict where the day number would be in the string
    //(thats important for when we make the DB query) all single digit dates needed to have a 0 added (ex. the day 7 becomes 07)
        if( getlength(tempd2.getDate())==2){
            document.getElementById(dti[i]).innerHTML= months[tempd2.getMonth()] + ' '+tempd2.getDate()+', '+tempd2.getFullYear() ;
        }
        else{
            document.getElementById(dti[i]).innerHTML= months[tempd2.getMonth()] + ' 0'+tempd2.getDate()+', '+tempd2.getFullYear() ;
        }
    }
    
    //Same as Teacher Scheduling
    console.log('Filling Schedule...')    
    for (i = 0; i < 7; i++) { 
    
       if (days[i]==1) {
        document.getElementById(is[i]).src="/images/Play.png";   
        document.getElementById(hs[i]).innerHTML="Teaching";
        for (j = 0; j < 12; j++){
            if (dayhrs[i][j]==1){
            //document.getElementById(ls[i]).innerHTML+=hrs[j]+'  ';
            }
            else{
            var wid = week[i]+(j+1);
            document.getElementById(wid).disabled = true;
            }
        }
        } 
        else{
        document.getElementById(is[i]).src="/images/Rest.png";   
        document.getElementById(hs[i]).innerHTML="Rest Day";
    
        for (j = 0; j < 12; j++){
            var wid = week[i]+(j+1);
            document.getElementById(wid).disabled = true;
            }
        }
    }
    console.log('ScheduleFilled')
    }
    
    
    //For comments on date function go to fillschedule_booking function
    function weekchange(weekchange){
    var week= ['m','t','w','th','f','s','u']
    var dti=['date_1','date_2','date_3','date_4','date_5','date_6','date_7']
    var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
    var d = new Date();
    var tempd=new Date();
    var tempd2=new Date();
    var weekl=new Date();
    var weekh=new Date();
    var daynum=d.getDay();
    
    if (daynum==0){
    daynum=6;}
    else{
    daynum=daynum-1}
    
    weekcounter=weekcounter + weekchange
    console.log('weekcounter')
    console.log(weekcounter)
    
    daynum=daynum+(7*weekcounter)
    
    weekl=changedate(tempd, -daynum)
    weekh=changedate(tempd, 6-daynum)
    document.getElementById('weekdates').innerHTML= months[weekl.getMonth()] + ' '+weekl.getDate()+', '+weekl.getFullYear() + ' - ' +months[weekh.getMonth()] + ' '+weekh.getDate()+', '+weekh.getFullYear();
    
    for (i = 0; i < 7; i++) { 
    console.log(tempd)
    tempd2=changedate(tempd, i-daynum)
    console.log(tempd2)
    
        if( getlength(tempd2.getDate())==2){
            document.getElementById(dti[i]).innerHTML= months[tempd2.getMonth()] + ' '+tempd2.getDate()+', '+tempd2.getFullYear() ;
        }
        else{
            document.getElementById(dti[i]).innerHTML= months[tempd2.getMonth()] + ' 0'+tempd2.getDate()+', '+tempd2.getFullYear() ;
        }
    }
    }
    
    window.onload=fillSchedule_Booking();
    </script>
    
    <% include ../partials/footer %>
    
